
<div class="page-header">
  <h1>Problems</h1>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th>문제 번호</th>
      <th>제목</th>
      <th>총 제출</th>
      <th>정답</th>
      <th>정답률</th>
    </tr>
  </thead>
  <tbody>
    <% @problems.each do |problem| %>
      <tr>
        <td><%= problem.id %></td>
        <td>
          <%= link_to problem.title, problem_path(problem)%>
        </td>

        <td>
          <%= problem.submissions.count %>
        </td>

        <td>
          <%= problem.submissions.where("status = ?", "정답\n").count %>
        </td>
      
        <td>
          <%
              submit = problem.submissions.count

              if submit<=0
          %>      
                0%
          <%
              else
          %>
          <%=
            problem.submissions.where("status = ?", "정답\n").count*100/submit
          %>
                %
          <%
             end
          %> 
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<ul class="pagination">
  <li><a href="/problemset">&laquo;</a></li>
  <% num = @problems.total_pages %>
  <% (1..num).each do |i| %>
    <li><a href="/problemset/<%= i %>"><%= i %></a></li>
  <% end %>
  <li><a href="/problemset/<%= num %>">&raquo;</a></li>
</ul>
